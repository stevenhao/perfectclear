<html>
<head>
  <!-- Latest compiled and minified JavaScript -->
  <script type="text/coffeescript" src="steven.coffee"></script>
  <script type="text/coffeescript" src="tetris.coffee"></script>
  <script type="text/coffeescript" src="play.coffee"></script>
  <script type="text/javascript" src="coffee-script.js"></script>
  <script src="jquery.min.js"></script>
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/tetris.css">
  <style>
    body {
      background-color: #121212;
      color: #e0e0e0;
      margin: 0;
      padding: 0;
      overflow: hidden;
    }
    .zen-mode {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    /* Maximize game well size */
    #game-outer {
      width: 80vh !important;
      height: 80vh !important;
      margin: 0 auto;
    }
    .panel {
      background-color: #1e1e1e;
      border: 1px solid #333;
    }
    .panel-default>.panel-heading {
      background-color: #2d2d2d;
      color: #e0e0e0;
      border-color: #333;
    }
    .score-animation {
      animation: pulse 0.5s ease-in-out;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.2); }
      100% { transform: scale(1); }
    }
  </style>
</head>
<body class="zen-mode-body">
  <div class="zen-mode">
    <div class="container-fluid" style="width: 100%; height: 100%;">
      <div class="row" style="height: 100%;">
        <div class="col-md-12">
          <div class="panel panel-default" style="height: 95vh;">
            <div class="panel-heading" style="display: flex; justify-content: space-between;">
              <h3 class="panel-title">ðŸ’¯ðŸ’¯ðŸ’¯ðŸ’¯ðŸ’¯</h3>
              <div>
                <button id="autoplay" type="button" class="btn btn-sm">Pause</button>
                <button class="btn btn-sm" id="reset">Reset</button>
                <label style="cursor: pointer; margin-left: 10px;"><input type="checkbox" id="fast-controller"/>Faster</label>
              </div>
              <h3 class="panel-title" id="happy-indicator">ðŸ¤“</h3>
            </div>
            <div class="panel-body" style="position: relative; height: calc(95vh - 50px); display: flex; justify-content: center; align-items: center;">
              <div id="hold" style="position: absolute; left: 10px; top: 10px; width: 8vh; height: 8vh; background-color: black">
              </div>

              <div id="game-outer" style="position: relative; width: 85vh; height: 85vh;"> <!-- much bigger game well -->
                <div id="game-inner" h="10" w="10" class="grid">
                </div>
              </div>

              <div id="previews" style="position: absolute; right: 10px; top: 10px; width: 8vh; height: 40vh; background-color: black">
              </div>
              
              <div id="counter" style="position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); font-size: 24pt;" class="counter">
                0
              </div>
              
              <div style="position: absolute; bottom: 10px; left: 10px;">
                <button class="btn btn-sm" id="undo">Undo</button>
                <button class="btn btn-sm" id="redo">Redo</button>
                <label style="cursor: pointer; margin-left: 10px;"><input type="checkbox" id="stop-controller"/> Stop when solution is found</label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Wait for document to be fully loaded
    $(document).ready(function() {
      // Set a flag to identify zen mode
      window.zenMode = true;
      
      // Start autoplay automatically
      setTimeout(function() {
        if (!window.autoplaying) {
          $('#autoplay').click();
        }
      }, 1000);

      // Handle arrow key interactions to pause AI
      $(document).on('keydown', function(e) {
        const arrowKeys = ['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown'];
        if (arrowKeys.includes(e.key) && window.autoplaying) {
          $('#autoplay').click(); // Pause the AI
        }
      });
    });
  </script>
</body>
</html>
